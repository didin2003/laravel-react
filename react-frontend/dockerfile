FROM node:20-alpine AS builder

WORKDIR /app

# Install dependencies
COPY package*.json ./
RUN npm install

# Copy all project files
COPY . .

# Build Vite using Node (bypasses permission denied issue)
RUN node node_modules/vite/bin/vite.js build

# No need to run server inside container
CMD ["sh", "-c", "echo Build completed. Copy dist folder to NGINX."]
